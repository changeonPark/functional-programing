<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>2. í•¨ìˆ˜í˜•ìœ¼ë¡œ ì „í™˜í•˜ê¸°</title>
  </head>
  <body>
    12313
    <script type="text/javascript" src="./_.js"></script>
    <script>
      const users = [
        { id: 1, name: "ID", age: 36 },
        { id: 2, name: "BJ", age: 32 },
        { id: 3, name: "JM", age: 32 },
        { id: 4, name: "PJ", age: 27 },
        { id: 5, name: "HA", age: 25 },
        { id: 6, name: "JE", age: 26 },
        { id: 7, name: "JI", age: 31 },
        { id: 8, name: "MP", age: 23 },
      ]

      // ëª…ë ¹í˜• ì½”ë“œ

      // 1. 30ì„¸ ì´ìƒì¸ usersë¥¼ ê±°ë¥¸ë‹¤.
      const temp_users = []

      for (let i = 0; i < users.length; i++) {
        if (users[i].age >= 30) {
          temp_users.push(users[i])
        }
      }

      // 2. 30ì„¸ ì´ìƒì¸ usersì˜ namesë¥¼ ìˆ˜ì¡íŒë‹¤.
      const names = []
      for (let i = 0; i < temp_users.length; i++) {
        names.push(temp_users[i].name)
      }

      // 3. 30ì„¸ ë¯¸ë§Œì¸ usersë¥¼ ê±°ë¥¸ë‹¤.
      const temp_users2 = []

      for (let i = 0; i < users.length; i++) {
        if (users[i].age < 30) {
          temp_users2.push(users[i])
        }
      }

      // 4. 30ì„¸ ë¯¸ë§Œì¸ usersì˜ agesë¥¼ ìˆ˜ì§‘í•œë‹¤.
      const ages = []
      for (let i = 0; i < temp_users2.length; i++) {
        ages.push(temp_users2[i].age)
      }

      const over_30 = _filter(users, function (user) {
        return user.age >= 30
      })
      console.log("ğŸš€ ~ file: change-functional.js:70 ~ over_30:", over_30)

      const f_names = _map(over_30, function (user) {
        return user.name
      })
      console.log("ğŸš€ ~ file: change-functional.js:74 ~ f_names:", f_names)

      const under_30 = _filter(users, function (user) {
        return user.age < 30
      })
      console.log("ğŸš€ ~ file: change-functional.js:80 ~ under_30:", under_30)

      const f_ages = _map(under_30, function (user) {
        return user.age
      })
      console.log("ğŸš€ ~ file: change-functional.js:85 ~ f_ages:", f_ages)

      const over_30_names = _map(
        _filter(users, function (user) {
          return user.age >= 30
        }),
        function (user) {
          return user.name
        }
      )
      console.log(
        "ğŸš€ ~ file: change-functional.js:95 ~ over_30_names:",
        over_30_names
      )

      // ë‹¤í˜•ì„±: polymorphism
      // ì™¸ë¶€ ë‹¤í˜•ì„± => array_like, arguments, document.querySelectorAll

      const polymorphismArray = _filter([1, 2, 3, 4], function (x) {
        return x % 2
      })
      console.log(
        "ğŸš€ ~ file: 2. í•¨ìˆ˜í˜•ìœ¼ë¡œ ì „í™˜í•˜ê¸°.html:124 ~ polymorphismArray ~ polymorphismArray:",
        polymorphismArray
      )

      const polymorphismDocument = _map(
        document.querySelectorAll("*"),
        function (x) {
          return x.nodeName
        }
      )
      console.log(
        "ğŸš€ ~ file: 2. í•¨ìˆ˜í˜•ìœ¼ë¡œ ì „í™˜í•˜ê¸°.html:131 ~ polymorphismDocument:",
        polymorphismDocument
      )

      // ë‚´ë¶€ ë‹¤í˜•ì„± => predi, iter, mapper
      const polymorphismPredicate = _map([1, 2, 3, 4], function (v) {
        return v + 10
      })
      console.log(
        "ğŸš€ ~ file: 2. í•¨ìˆ˜í˜•ìœ¼ë¡œ ì „í™˜í•˜ê¸°.html:136 ~ polymorphismPredicate ~ polymorphismPredicate:",
        polymorphismPredicate
      )

      // currying => í•¨ìˆ˜ì™€ ì¸ìë¥¼ ë‹¤ë£¨ëŠ” ê¸°ë²•, í•¨ìˆ˜ì— ì¸ìë¥¼ í•˜ë‚˜ì”© ì ìš©í•˜ë‹¤ê°€ í•„ìš”í•œ ì¸ì ëª¨ë‘ ì¶©ì¡± ì‹œ í•¨ìˆ˜ ë³¸ì²´ ì‹¤í–‰

      const add = _curry(function (a, b) {
        return a + b
      })

      const add10 = add(10)
      console.log(
        "ğŸš€ ~ file: 2. í•¨ìˆ˜í˜•ìœ¼ë¡œ ì „í™˜í•˜ê¸°.html:166 ~ add10:",
        add10(5)
      )

      console.log("add 5 + 3 :", add(5)(3))
      console.log("add(5, 2) : ", add(5, 2))

      const sub = _curryr(function (a, b) {
        return a - b
      })

      const sub10 = sub(10)

      console.log("curryr sub 5 - 10 :", sub10(5))
      console.log("sub(10, 5) : ", sub(10, 5))

      const user1 = users[0]
      console.log(
        "ğŸš€ ~ file: 2. í•¨ìˆ˜í˜•ìœ¼ë¡œ ì „í™˜í•˜ê¸°.html:203 ~ user1:",
        user1.name
      )
      console.log("_get : ", _get(user1, "name"))
      console.log("curryr _get : ", _get("name")(user1))

      const getName = _get("name")
      console.log(
        "ğŸš€ ~ file: 2. í•¨ìˆ˜í˜•ìœ¼ë¡œ ì „í™˜í•˜ê¸°.html:211 ~ getName:",
        getName(users[2])
      )

      console.log(
        _map(
          _filter(users, function (user) {
            return user.age >= 30
          }),
          function (user) {
            return user.name
          }
        )
      )

      console.log(
        _map(
          _filter(users, function (user) {
            return user.age >= 30
          }),
          _get("name")
        )
      )

      console.clear()

      // _reduce => Array.reduce ì§ì ‘ êµ¬í˜„í•´ë³´ê¸°

      // Array Like ê°ì²´ë¥¼ Arrayì²˜ëŸ¼ sliceë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•œ í•¨ìˆ˜
      function _rest(list, num) {
        const slice = Array.prototype.slice
        slice.call(list, num || 1)
      }

      function _reduce(list, iters, memo) {
        if (arguments.length === 2) {
          memo = list[0]
          list = _rest(list)
        }

        _each(list, function (val) {
          memo = iters(memo, val)
        })

        return memo
      }

      /*
       * memo = add(0, 10)
       * memo = add(memo, 2)
       * memo = add(memo, 3)
       * return memo
       */

      console.log(
        "reduce test 6ì´ ë˜ì–´ì•¼ í•¨ : ",
        _reduce(
          [1, 2, 3],
          function (a, b) {
            return a + b
          },
          0
        )
      )
    </script>
  </body>
</html>
